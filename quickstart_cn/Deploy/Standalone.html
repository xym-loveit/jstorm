<!DOCTYPE html>
<!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>JStorm 文档 : Standalone模式安装</title>
    <link rel="shortcut icon" href="/img/favicon.png" type="image/x-icon">
    <link rel="icon" href="/img/favicon.png" type="image/x-icon">

    <!-- Bootstrap -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.4/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="/css/jstorm.css">
    <link rel="stylesheet" href="/css/syntax.css">
    <link rel="stylesheet" href="/css/codetabs.css">
    
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    
    <!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<!--




-->
    <!-- Top navbar. -->
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <!-- The logo. -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <div class="navbar-logo">
            <a href="/"><img alt="jstorm" src="/img/jstorm-logo.png"></a>
          </div>
        </div><!-- /.navbar-header -->

        <!-- The navigation links. -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          <ul class="nav navbar-nav">
            <!-- Downloads -->
            <li class="hidden-sm "><a href="/Downloads.html">Downloads</a></li>

            <!-- Performance -->
            <li class="hidden-sm "><a href="/Performance_cn">Performance</a></li>

            <!-- QuickStart -->
            <li class="dropdown">
              <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">QuickStart <span class="caret"></span></a>
              <ul class="dropdown-menu" role="menu">
                
                
                <li class=""><a href="/quickstart_cn/BasicConception.html">5分钟基础概念(新手第一篇)</a></li>
                
                <li class=""><a href="/quickstart_cn/Example.html">入门Example</a></li>
                
                <li class="active"><a href="/quickstart_cn/Deploy/">安装部署</a></li>
                
                <li class=""><a href="/quickstart_cn/Upgrade/">升级</a></li>
                
                <li class=""><a href="/quickstart_cn/UpgradeFromStorm.html">从Apache Storm升级到JStorm</a></li>
                
                <li class=""><a href="/quickstart_cn/Compile.html">编译JStorm</a></li>
                
              </ul>
            </li>

            <!-- ProgrammingGuide -->
            <li class="dropdown">
              <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">ProgrammingGuide <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  
                  
                  <li class=""><a href="/ProgrammingGuide_cn/DebugLocalApp.html">本地调试</a></li>
                  
                  <li class=""><a href="/ProgrammingGuide_cn/StreamSplitJoin.html">数据流分流合并</a></li>
                  
                  <li class=""><a href="/ProgrammingGuide_cn/Transaction/">事务</a></li>
                  
                  <li class=""><a href="/ProgrammingGuide_cn/Trident/">Trident</a></li>
                  
                  <li class=""><a href="/ProgrammingGuide_cn/AdvancedUsage/">Advanced Usage</a></li>
                  
              </ul>
            </li>

            <!-- Maintenance -->
            <li class="dropdown">
              <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">运维 <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  
                  
                  <li class=""><a href="/Maintenance_cn/Configuration.html">配置注解</a></li>
                  
                  <li class=""><a href="/Maintenance_cn/ConfigurationAutomacticSync.html">自动同步配置文件</a></li>
                  
                  <li class=""><a href="/Maintenance_cn/Isolation.html">资源隔离</a></li>
                  
                  <li class=""><a href="/Maintenance_cn/HealthCheck.html">Supervisor自检</a></li>
                  
                  <li class=""><a href="/Maintenance_cn/JStorm-on-Yarn.html">JStorm-on-Yarn</a></li>
                  
                  <li class=""><a href="/Maintenance_cn/ClusterHA.html">同城灾备&异地灾备</a></li>
                  
                  <li class=""><a href="/Maintenance_cn/BlobStore.html">BlobStore</a></li>
                  
                  <li class=""><a href="/Maintenance_cn/DynamicAdjustLog.html">动态调整日志</a></li>
                  
              </ul>
            </li>

            <!-- FAQ -->
            <li class="hidden-sm "><a href="/FAQ_cn/">FAQ</a></li>



            <!-- Community -->
            <li class="dropdown">
              <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">社区 <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  
                  
                  <li class=""><a href="/Community/Email.html">Email List</a></li>
                  
                  <li class=""><a href="/Community/Committers.html">Committer List</a></li>
                  
                  <li class=""><a href="/Community/Events-Meetups.html">Events and Meetups</a></li>
                  
                  <li class=""><a href="/Community/Issues.html">Track issues</a></li>
                  
                  <li class=""><a href="/Community/JStormUsers.html">JStorm User List</a></li>
                  
              </ul>
            </li>

          </ul>
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">Language <span class="caret"></span></a>
                <ul class="dropdown-menu" role="menu">
                  <li class=""><a href="/index.html">English</a></li>
                  <li class=""><a href="/index_cn.html">中文</a></li>

              </ul>
            </li>
            <li class="hidden-sm "><a href="http://storm.taobao.org">Demo</a></li>
          </ul>          
        </div><!-- /.navbar-collapse -->
      </div><!-- /.container -->
    </nav>


    

    <!-- Main content. -->
    <div class="container">
      
      <!--
Licensed to the Apache Software Foundation (ASF) under one
or more contributor license agreements.  See the NOTICE file
distributed with this work for additional information
regarding copyright ownership.  The ASF licenses this file
to you under the Apache License, Version 2.0 (the
"License"); you may not use this file except in compliance
with the License.  You may obtain a copy of the License at

  http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing,
software distributed under the License is distributed on an
"AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, either express or implied.  See the License for the
specific language governing permissions and limitations
under the License.
-->
<div class="row">


  <!-- Sub Navigation -->
  <div class="col-sm-3">
    <ul id="sub-nav">
      
      
      
        
        <li><a href="/quickstart_cn/Deploy/" class="active">安装部署</a>
          
        </li>
      
        
        <li><a href="/quickstart_cn/Deploy/Standalone.html" class="active">Standalone模式安装</a>
          
        </li>
      
        
        <li><a href="/quickstart_cn/Deploy/WebUI.html" class="">WebUI 安装部署</a>
          
        </li>
      
        
        <li><a href="/quickstart_cn/Deploy/Yarn.html" class="">JStorm-on-Yarn 安装部署</a>
          
        </li>
      
        
        <li><a href="/quickstart_cn/Deploy/Docker.html" class="">JStorm-on-Docker 安装部署</a>
          
        </li>
      
    </ul>
  </div>
  <!-- Main -->
  <div class="col-sm-9">
    <!-- Top anchor -->
    <a href="#top"></a>

    <div class="text">
      <!-- Main heading -->
      <h1>Standalone模式安装</h1>

      <!-- Content -->
      <ul id="markdown-toc">
  <li><a href="#section" id="markdown-toc-section">安装步骤</a></li>
  <li><a href="#section-1" id="markdown-toc-section-1">搭建外部依赖</a>    <ul>
      <li><a href="#zookeeper" id="markdown-toc-zookeeper">搭建Zookeeper集群</a></li>
      <li><a href="#jdk-7" id="markdown-toc-jdk-7">安装JDK 7</a></li>
    </ul>
  </li>
  <li><a href="#jstorm" id="markdown-toc-jstorm">搭建JStorm集群</a>    <ul>
      <li><a href="#section-2" id="markdown-toc-section-2">检查</a></li>
      <li><a href="#jstorm-1" id="markdown-toc-jstorm-1">安装JStorm</a></li>
      <li><a href="#jstormhomeconfstormyaml" id="markdown-toc-jstormhomeconfstormyaml">配置$JSTORM_HOME/conf/storm.yaml</a></li>
      <li><a href="#section-3" id="markdown-toc-section-3">部署其他节点时</a></li>
      <li><a href="#jstorm-2" id="markdown-toc-jstorm-2">启动JStorm</a></li>
    </ul>
  </li>
</ul>

<h1 id="section">安装步骤</h1>

<ul>
  <li>从<a href="/downloads/">下载页面</a>下载relase包</li>
  <li>搭建外部依赖
    <ul>
      <li>搭建Zookeeper集群</li>
      <li>安装Java</li>
    </ul>
  </li>
  <li>安装jstorm</li>
  <li>启动JStorm集群</li>
</ul>

<h1 id="section-1">搭建外部依赖</h1>

<h2 id="zookeeper">搭建Zookeeper集群</h2>

<p>如果公司有现成zookeeper，则直接使用，无须安装。</p>

<p>本处不细描叙Zookeeper安装步骤</p>

<ul>
  <li>安装步骤麻烦参考 <a href="http://www.cnblogs.com/linjiqin/archive/2013/03/16/2962597.html">”Zookeeper 安装步骤“</a></li>
  <li>Zookeeper配置麻烦参考 <a href="http://blog.csdn.net/hi_kevin/article/details/7089358">“Zookeeper 配置介绍”</a></li>
</ul>

<h2 id="jdk-7">安装JDK 7</h2>
<p>如果机器上已经安装了jdk7, 则无需再安装jdk7，</p>

<p>注意：
* 如果当前系统是64位系统，则需要下载64位JDK，如果是32为系统，则下载32位JDK
* jstorm 2.x 版本开始，要求jdk版本必须等于或高于jdk7</p>

<h1 id="jstorm">搭建JStorm集群</h1>

<h3 id="section-2">检查</h3>
<ul>
  <li>
    <p>检查机器ip是否正确
执行<code>hostname -i</code> 如果返回“127.0.0.1”,  则机器没有配置正确的ip， 需要设定/etc/hosts或网卡配置， 直到<code>hostname -i</code>返回一个正确的ip</p>
  </li>
  <li>
    <p>检查 java 版本
执行<code>java -version</code>, 如果找不到java 或java 版本低于7， 则需要设置PATH环境变量或安装jdk7</p>
  </li>
</ul>

<h3 id="jstorm-1">安装JStorm</h3>

<p>假设以jstorm-2.1.1.zip为例</p>

<pre><code>unzip jstorm-2.1.1.zip
vi ~/.bashrc
export JSTORM_HOME=/XXXXX/XXXX
export PATH=$PATH:$JSTORM_HOME/bin
</code></pre>

<h3 id="jstormhomeconfstormyaml">配置$JSTORM_HOME/conf/storm.yaml</h3>

<p>基本配置项：</p>

<ul>
  <li>storm.zookeeper.servers: 表示zookeeper 的地址，</li>
  <li>storm.zookeeper.root: 表示JStorm在zookeeper中的根目录，<strong>当多个JStorm共享一个zookeeper时，需要设置该选项</strong>，默认即为“/jstorm”</li>
  <li>nimbus.host: 表示nimbus的地址， 填写ip</li>
  <li>storm.local.dir: 表示JStorm临时数据存放目录，需要保证JStorm程序对该目录有写权限</li>
</ul>

<p>其他详细配置，请参考<a href="/Maintenance/Configuration.html">配置详解</a></p>

<h3 id="section-3">部署其他节点时</h3>
<p>请确保其他节点的‘临时数据存放’目录为空， ‘临时数据存放’ 为$JSTORM_HOME/conf/storm.yaml 中指定storm.local.dir的目录</p>

<h3 id="jstorm-2">启动JStorm</h3>

<ul>
  <li>在nimbus 节点上执行 “nohup jstorm nimbus &amp;”, 查看$JSTORM_HOME/logs/nimbus.log检查有无错误</li>
  <li>在supervisor节点上执行 “nohup jstorm supervisor &amp;”, 查看$JSTORM_HOME/logs/supervisor.log检查有无错误</li>
</ul>

      
    </div>
  </div>

  
</div>

    </div><!-- /.container -->

    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//cdn.bootcss.com/jquery/1.11.2/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="//cdn.bootcss.com/bootstrap/3.3.4/js/bootstrap.min.js"></script>
    <script src="//cdn.bootcss.com/anchor-js/3.1.0/anchor.min.js"></script>
    <script src="/js/jstorm.js"></script>

    <!-- Google Analytics -->
    <!-- script>
      (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
      })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

      ga('create', 'UA-52545728-1', 'auto');
      ga('send', 'pageview');
    </script -->

    <!-- Baidu Analytics -->
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "//hm.baidu.com/hm.js?835985ad7943d8c24bc3c1f155b7d4a2";
        var s = document.getElementsByTagName("script")[0]; 
        s.parentNode.insertBefore(hm, s);
      })();
    </script>


    <!-- Disqus -->
    
  </body>
</html>
